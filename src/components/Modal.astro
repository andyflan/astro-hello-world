---
import Icon from 'astro-icon';

const { 
  id,
} = Astro.props; 
---
<div 
  id={id}
  class="hidden fixed top-0 left-0 w-screen h-screen bg-gray-400 bg-opacity-70"
>
  <div 
    class="absolute w-10/12 left-1/2 top-6 md:top-1/3 -translate-x-1/2 md:-translate-y-1/2 md:w-1/2 px-6 md:px-12 bg-white rounded-lg"
  >
    <button 
      id={`${id}_close`}
      class="absolute top-0 right-0 block w-16 h-16 cursor-pointer hover:bg-gray-100 rounded-tr-lg" 
    >
      <Icon 
        pack="lucide"
        name="x" 
        class="w-8 h-8 m-4 text-gray-500 hover:text-gray-700" 
      />  
    </button>

    <slot />
  </div>
</div>

<script define:vars={{ id }}>
  document.getElementById(`${id}_close`).addEventListener('click', () => {
    document.getElementById(id).classList.add('hidden');
  });

  document.addEventListener('keydown', evt => {
    if (evt.key === 'Escape') {
      document.getElementById(id).classList.add('hidden');
    }
  });
</script>